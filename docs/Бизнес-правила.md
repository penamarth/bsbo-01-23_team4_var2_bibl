# Бизнес-правила

## Управление книгами
1. Каждая книга имеет уникальный идентификатор и может находиться только в одном состоянии: доступна или выдана.
2. Нельзя списать книгу, если она выдана.
3. При добавлении новой книги система автоматически присваивает ей статус "доступна".
4. Книга не может быть удалена из системы - только списана с сохранением истории.
5. Книги с статусом "списана" исключаются из поиска в каталоге.

## Работа с читателями
6. Выдача книги возможна только зарегистрированному читателю.
7. Читатель может иметь на руках не более 5 книг одновременно.
8. При регистрации нового читателя проверяется уникальность номера читательского билета.
9. Читатель не может быть удален из системы, если у него есть невозвращенные книги.
10. При достижении лимита книг у читателя система блокирует новые выдачи.

## Процесс выдачи и возврата
11. Срок выдачи книги - 30 дней с момента оформления.
12. При возврате книги с просрочкой автоматически рассчитывается штраф (10 рублей/день).
13. Возврат книги переводит её состояние в "доступна" и закрывает активный займ.
14. Книга не может быть выдана, если её статус отличен от "доступна".
15. Система предоставляет уведомления о приближающихся сроках возврата.

## Безопасность и доступ
16. Добавление книг возможно только пользователем с ролью "Библиотекарь".
17. Просмотр каталога доступен всем пользователям системы.
18. Изменение данных о читателях требует прав администратора.
19. Списание книг требует подтверждения двумя разными библиотекарями.

## Валидация данных
20. Поле "Автор" книги должно содержать только буквенные символы.
21. ISBN книги должен соответствовать международному стандарту.
22. Номер читательского билета должен быть уникальным в системе.
23. Дата возврата не может быть раньше даты выдачи.

## Системные требования
24. Репозиторий обеспечивает согласованность данных о книгах, читателях и займах.
25. Все операции фиксируются с указанием даты, времени и исполнителя.
26. Система должна сохранять историю всех операций для последующего аудита.
27. При сбое системы гарантируется целостность данных и возможность восстановления.
28. Статистика популярности книг формируется на основе частоты выдачи.
